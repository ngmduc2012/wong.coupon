# H∆∞·ªõng D·∫´n T·∫°o v√† Qu·∫£n L√Ω Package

**T·∫°o v√† qu·∫£n l√Ω package gi√∫p gi·∫£m th·ªùi gian code ƒë√°ng k·ªÉ, t√°i s·ª≠ d·ª•ng m√£ ngu·ªìn, v√† gi√∫p duy tr√¨ d·ª± √°n m·ªôt c√°ch d·ªÖ d√†ng h∆°n. D∆∞·ªõi ƒë√¢y l√† m·ªôt s·ªë l·ª£i √≠ch c·ª• th·ªÉ c·ªßa vi·ªác t·∫°o package:**

1. **T√°i s·ª≠ d·ª•ng m√£ ngu·ªìn**: Khi b·∫°n t·∫°o ra c√°c package cho c√°c t√≠nh nƒÉng ho·∫∑c th√†nh ph·∫ßn ph·ªï bi·∫øn, b·∫°n c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng ch√∫ng trong nhi·ªÅu d·ª± √°n kh√°c nhau m√† kh√¥ng c·∫ßn ph·∫£i vi·∫øt l·∫°i m√£. ƒêi·ªÅu n√†y gi√∫p ti·∫øt ki·ªám th·ªùi gian v√† c√¥ng s·ª©c.

2. **D·ªÖ d√†ng qu·∫£n l√Ω v√† b·∫£o tr√¨**: C√°c package ƒë∆∞·ª£c t·ªï ch·ª©c g·ªçn g√†ng, d·ªÖ d√†ng c·∫≠p nh·∫≠t v√† b·∫£o tr√¨. Khi c·∫ßn thay ƒë·ªïi ho·∫∑c n√¢ng c·∫•p m·ªôt t√≠nh nƒÉng, b·∫°n ch·ªâ c·∫ßn c·∫≠p nh·∫≠t package m√† kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn to√†n b·ªô d·ª± √°n.

3. **TƒÉng c∆∞·ªùng t√≠nh nh·∫•t qu√°n**: S·ª≠ d·ª•ng c√°c package gi√∫p ƒë·∫£m b·∫£o r·∫±ng c√°c ƒëo·∫°n m√£ ngu·ªìn c·ªßa b·∫°n lu√¥n nh·∫•t qu√°n v√† tu√¢n th·ªß c√πng m·ªôt quy t·∫Øc ho·∫∑c chu·∫©n m·ª±c.

4. **Ph√°t tri·ªÉn nhanh ch√≥ng**: V·ªõi c√°c package ƒë∆∞·ª£c chu·∫©n b·ªã s·∫µn, b·∫°n c√≥ th·ªÉ t·∫≠p trung v√†o vi·ªác ph√°t tri·ªÉn c√°c t√≠nh nƒÉng ƒë·∫∑c th√π c·ªßa d·ª± √°n m√† kh√¥ng m·∫•t th·ªùi gian cho c√°c ph·∫ßn c∆° b·∫£n.

5. **Chia s·∫ª v√† c·ªông t√°c**: C√°c package c√≥ th·ªÉ ƒë∆∞·ª£c chia s·∫ª v·ªõi c·ªông ƒë·ªìng ho·∫∑c nh√≥m l√†m vi·ªác, gi√∫p tƒÉng c∆∞·ªùng kh·∫£ nƒÉng c·ªông t√°c v√† t·∫≠n d·ª•ng ki·∫øn th·ª©c c·ªßa nhau.

6. **Gi·∫£m thi·ªÉu l·ªói**: Khi s·ª≠ d·ª•ng l·∫°i c√°c package ƒë√£ ƒë∆∞·ª£c ki·ªÉm th·ª≠ v√† ·ªïn ƒë·ªãnh, b·∫°n s·∫Ω gi·∫£m thi·ªÉu nguy c∆° g·∫∑p ph·∫£i c√°c l·ªói m·ªõi khi ph√°t tri·ªÉn ·ª©ng d·ª•ng.

D∆∞·ªõi ƒë√¢y l√† h∆∞·ªõng d·∫´n chi ti·∫øt v·ªÅ c√°ch t·∫°o v√† qu·∫£n l√Ω package:

## 1 C√°ch t√¥i thi·∫øt l·∫≠p c√°c package cho ƒë·ªôi nh√≥m.

![image1.png](image1.png)

T√¥i ƒë√£ t·∫°o 1 th∆∞ m·ª•c c√≥ t√™n l√† packages ƒë·ªÉ l∆∞u t·∫•t c·∫£ c√°c package t√¥i t·∫°o ra.
T√¥i chia ch√∫ng th√†nh 2 lo·∫°i, 1 lo·∫°i thu·ªôc v√†o ancestor_core, ƒë√¢y l√† nh·ªØng package n·ªÅn t·∫£ng m√† t√¥i ƒë√£ vi·∫øt g·ªçn l·∫°i c√°c h√†m theo phong c√°ch c·ªßa l·∫≠p tr√¨nh h∆∞·ªõng ƒë·ªëi t∆∞·ª£ng. Khi s·ª≠ d·ª•ng ch·ªâ vi·ªác g·ªçi n√≥ ra ngo√†i v√† s·ª≠ d·ª•ng, kh√¥ng c·∫ßn b·∫≠n t√¢m ƒë·∫øn c·∫•u tr√∫c ph·ª©c t·∫°p b√™n trong c√°c h√†m x·ª≠ l√Ω v√† thi·∫øt l·∫≠p. 
M·ªôt lo·∫°i kh√°c l√† c√°c package ui, n∆°i ch·ª©a ƒë·ª±ng t·∫•t c·∫£ c√°c widget ui c·ªßa giao di·ªán, hay nh·ªØng th·ª© g√¨ li√™n qu√°n ƒë·∫øn ui, n√≥ gi√∫p t·ªëi gi·∫£n 1 kh·ªëi l∆∞·ª£ng code l·ªõn v√† c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng cho c√°c d·ª± √°n sau n√†y. 

H√£y c√πng ƒëi s√¢u v√†o 1 trong s·ªë ƒë√≥, f·ªâre_core:
![image2.png](image2.png)

N∆°i ƒë√¢y t√¥i l∆∞u tr·ªØ t·∫•t c·∫£ c√°c ph·∫ßn code t√¥i ƒë√£ t·ª´ng code li√™n quan ƒë·∫øn firebase. N·∫øu nh∆∞ trong t∆∞∆°ng lai, c√≥ 1 d·ª± √°n n√†o m·ªõi c·∫ßn s·ª≠ d·ª•ng ƒë·∫øn firebase, t√¥i ch·ªâ vi·ªác import package n√†y c·ªßa t√¥i v√†o v√† s·ª≠ d·ª•ng l·∫°i code t√¥i ƒë√£ t·ª´ng code tr∆∞·ªõc ƒë√¢y. Th·∫≠m tr√≠ b·∫°n c√≥ th·ªÉ ƒë·ªìng b·ªô t·∫•t c·∫£ c√°c package c·ªßa c√°c project kh√°c nhau b·∫±ng git ƒë·ªÉ c·∫≠p nh·∫≠p nh·ªØng code m·ªõi nh·∫•t cho d·ª± √°n. 


## 2 Thi·∫øt l√¢p 1 Package

### B∆∞·ªõc 1: Ch·∫°y
```bash
cd pathTo/packages

flutter create --template=package hello_core
```

### B∆∞·ªõc 2: Thi·∫øt l·∫≠p lint trong t·ªáp pubspec.yaml

```bash
cd pathTo/hello_core
flutter pub add lint
flutter pub add test
flutter pub add mockito
```
The lint package is a package that helps check errors for Dart. This will help keep Dart code neat and formatted.
[Learn more](https://pub.dev/packages/lint)

### B∆∞·ªõc 3: Thay th·∫ø t·ªáp analysis_options.yaml
Thay th·∫ø t·ªáp analysis_options.yaml c·ªßa d·ª± √°n
Th√™m c·∫•u h√¨nh ph√¢n t√≠ch l·ªói t·ª´ g√≥i `lint`.

```yaml
# File n√†y c·∫•u h√¨nh ph√¢n t√≠ch l·ªói s·ª≠ d·ª•ng b·ªô quy t·∫Øc t·ª´ package:lint

include: package:lint/strict.yaml # D√†nh cho c√°c ·ª©ng d·ª•ng s·∫£n xu·∫•t
# include: package:lint/casual.yaml # D√†nh cho m√£ m·∫´u, hackathons v√† c√°c m√£ kh√¥ng ph·∫£i s·∫£n xu·∫•t
# include: package:lint/package.yaml # D√†nh cho c√°c g√≥i v·ªõi API c√¥ng khai

# B·∫°n c√≥ th·ªÉ mu·ªën lo·∫°i b·ªè c√°c t·ªáp t·ª± ƒë·ªông t·∫°o ra kh·ªèi ph√¢n t√≠ch dart
analyzer:
  errors:
    invalid_annotation_target: ignore
  plugins:
    - custom_lint
  exclude:
    - packages/mason_core/**
    - '**.freezed.dart'
    - '**.g.dart'

# B·∫°n c√≥ th·ªÉ t√πy ch·ªânh c√°c quy t·∫Øc lint theo √Ω th√≠ch c·ªßa m√¨nh. M·ªôt danh s√°ch t·∫•t c·∫£ c√°c quy t·∫Øc
# c√≥ th·ªÉ ƒë∆∞·ª£c t√¨m th·∫•y t·∫°i https://dart-lang.github.io/linter/lints/options/options.html
linter:
  rules:
    - unawaited_futures
rules:
  # C√°c l·ªõp ti·ªán √≠ch r·∫•t tuy·ªát!
  # avoid_classes_with_only_static_members: false

  # ƒê·∫∑t c√°c constructor l√™n ƒë·∫ßu ti√™n trong m·ªói l·ªõp
  # sort_constructors_first: true

  # L·ª±a ch·ªçn kh√¥n ngoan, nh∆∞ng kh√¥ng c·∫ßn thi·∫øt
  prefer_double_quotes: true
  prefer_single_quotes: true
  avoid_dynamic_calls: true
  lines_longer_than_80_chars: true
  avoid_classes_with_only_static_members: true
  use_named_constants: true
```

Thay th·∫ø t·ªáp analysis_options.yaml c·ªßa package 
```yaml
include: ../../analysis_options.yaml
```

[Learn more](https://docs.flutter.dev/packages-and-plugins/developing-packages)

ƒê·ªÉ t·∫°o c·∫•u tr√∫c c√°c file th·ª≠ m·ª•c nh∆∞ trong h√¨nh ·∫£nh, b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng mason ƒë·ªÉ t·∫°o n√≥ 1 c√°ch nhanh ch√≥ng, n·∫øu b·∫°n ch∆∞a bi·∫øt v·ªÅ mason. B·∫°n c√≥ th·ªÉ tham kh·∫£o brick c·ªßa t√¥i t·∫°i ƒë√¢y [dr_folder_package](https://brickhub.dev/search?q=dr_folder_package) 

## 3 ƒê·ªìng b·ªô folder package ·ªü c√°c d·ª± √°n kh√°c 
### B∆∞·ªõc 1: T·∫°o 1 repository m·ªõi 
### B∆∞·ªõc 2: Ch·∫°y
```bash
cd pathTo/packages
git add .
git commit -am "changed"
git push origin feature-snap
```
### B∆∞·ªõc 3: (tu·ª≥ ch·ªçn) ƒë·∫©y l√™n
```bash
cd pathTo/packages
git fetch
git pull origin master --rebase
```

## 1.4 Branch
Create branch for package\
eg: 
- master
- feature-snap
- feature-sms
- feature-my
- feature-zeus

and then you can use the command below to update the package

### B∆∞·ªõc 2: (tu·ª≥ ch·ªçn) k√©o v·ªÅ
```bash
git pull origin master
git push origin feature-snap
git push origin feature-sms
git push origin feature-my
git push origin feature-zeus
git gc
```
## 1.5 Package Structure
A project package can contain many sub-packages. For example my package structure
![package-structure.png](package-structure.png)
## Use package in your project
To easily maintain and fix your package and your project, you should put the package in your project. It allows you to easily edit your project without having to update to git constantly.
![project-structure.png](project-structure.png)

and then add package name to your pubspec.yaml
![yaml-instruct.png](yaml-instruct.png)
## K·∫øt Lu·∫≠n
Vi·ªác x√¢y d·ª±ng package gi√∫p gi·∫£m th·ªùi gian code, t·∫°o ra m√£ m·ªôt l·∫ßn v√† s·ª≠ d·ª•ng l·∫°i nhi·ªÅu l·∫ßn trong nhi·ªÅu d·ª± √°n, gi·∫£m th·ªùi gian thi·∫øt l·∫≠p l·∫°i. Ch√∫c b·∫°n th√†nh c√¥ng trong vi·ªác t·∫°o v√† qu·∫£n l√Ω package c·ªßa m√¨nh! üéâ
